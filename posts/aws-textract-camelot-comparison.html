<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lx | Table Extraction: Comparing Amazon Textract Service and Camelot</title>
  <meta name="description" content="This article demostrate the output difference between AWS Textract and Camelot">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Table Extraction: Comparing Amazon Textract Service and Camelot">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://lxyuan0420.github.io/posts/aws-textract-camelot-comparison">
  <meta property="og:description" content="This article demostrate the output difference between AWS Textract and Camelot">
  <meta property="og:site_name" content="Lx">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="https://lxyuan0420.github.io/posts/aws-textract-camelot-comparison">
  <meta name="twitter:title" content="Table Extraction: Comparing Amazon Textract Service and Camelot">
  <meta name="twitter:description" content="This article demostrate the output difference between AWS Textract and Camelot">

  
    <meta property="og:image" content="https://lxyuan0420.github.io/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
    <meta name="twitter:image" content="https://lxyuan0420.github.io/assets/og-image-ee46bbc61b334e821e81534b1fd43f3fee6f020ec174b3c2114445695fd48c01.jpg">
  

  <link href="https://lxyuan0420.github.io/feed.xml" type="application/rss+xml" rel="alternate" title="Lx Last 10 blog posts" />

  

  

    
      <link rel="icon" type="image/x-icon" href="/assets/favicon-light-a98c41efc5ed9fcc06ac664c9e2f7a9b3c3b2e0a52357d221fe382f6f4abc8fc.ico">
      <link rel="apple-touch-icon" href="/assets/apple-touch-icon-light-87d1f2a3a19b1500e5c1626a0492025ca5f7f97d24540dc5900288e92112925a.png">
      <link rel="stylesheet" type="text/css" href="/assets/light-bb1553a18d0f1ccfe1aabc010584c49b4277a88503216b78906ba719e30019c1.css">
    

  

</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="Lx">Lx</a>
  <ul class="header-links">
    
    
      <li>
        <a href="https://twitter.com/lxyuan" rel="noreferrer noopener" target="_blank" title="Twitter">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-twitter">
  <use href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter" xlink:href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter"></use>
</svg>

        </a>
      </li>
    
    
    
    
      <li>
        <a href="https://github.com/LxYuan0420" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
      <li>
        <a href="https://www.linkedin.com/in/likxunyuan" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="mailto:lxyuan0420@gmail.com" title="Email">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-email">
  <use href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email" xlink:href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email"></use>
</svg>

        </a>
      </li>
    
    
    
  </ul>
</nav>



        <article class="article scrollappear">
          <header class="article-header">
            <h1>Table Extraction: Comparing Amazon Textract Service and Camelot</h1>
            <p>This article demostrate the output difference between AWS Textract and Camelot</p>
            <div class="article-list-footer">
  <span class="article-list-date">
    May 23, 2023
  </span>
  <span class="article-list-divider">-</span>
  <span class="article-list-minutes">
    
    
      3 minute read
    
  </span>
  <span class="article-list-divider">-</span>
  <div class="article-list-tags">
    
  </div>
</div>
          </header>

          <div class="article-content">
            <p>In today’s digital age, extracting information from documents efficiently and
accurately has become a necessity for businesses and individuals alike.
Fortunately, there are several services and tools available to simplify this
process. In this article, I will compare two popular options: Amazon Textract
and Camelot. The purpose of this demonstration is to showcase the differences
in the output generated by these services, helping me understand their
capabilities and make informed decisions without the need for signing up or
installing packages.</p>

<h6 id="test-1-extract-single-and-large-table">Test-1: Extract single and large table.</h6>
<p><a href="/assets/documentation/camelot_textract_single_comparison-879339c10a524bee3700d65a602ed19c9b87b59323f73400b2b005de25bfe818.png">
  <img src="/assets/documentation/camelot_textract_single_comparison-879339c10a524bee3700d65a602ed19c9b87b59323f73400b2b005de25bfe818.png" alt="Camelot vs AWS on single-table test" class="zooming" data-rjs="/assets/documentation/camelot_textract_single_comparison-879339c10a524bee3700d65a602ed19c9b87b59323f73400b2b005de25bfe818.png" data-zooming-width="2560" data-zooming-height="1080" />
</a></p>

<p>Refer to the image above, left-hand-side is the Camelot output saved as csv file; middle is the AWS textract output; right-hand-side is the input pdf page.</p>

<p>In this case, i think AWS produced better output for me:</p>
<ul>
  <li>(1) Capture the entire table;</li>
  <li>(2) Long line item are captured and grouped correctly (i.e., see the third underlined section title - Other comphrensions Income);</li>
  <li>(3) Negative numbers are parsed as the original format (i.e., output as (9513) instead of -9513);</li>
  <li>(4) Column header texts are grouped together (i.e., Mar 2022 $’000’).</li>
</ul>

<p>The third point is not necessarily an issue but personally i prefer original
format.</p>

<hr />

<h6 id="test-2-extract-multi-tables">Test-2: Extract multi-tables.</h6>
<p><a href="/assets/documentation/camelot_textract_comparison-f0399b15ced748f76c1489ddc278c503bddc2895b46425f0e57b3d5c43fa46db.png">
  <img src="/assets/documentation/camelot_textract_comparison-f0399b15ced748f76c1489ddc278c503bddc2895b46425f0e57b3d5c43fa46db.png" alt="Camelot vs AWS on multi-table test" class="zooming" data-rjs="/assets/documentation/camelot_textract_comparison-f0399b15ced748f76c1489ddc278c503bddc2895b46425f0e57b3d5c43fa46db.png" data-zooming-width="2560" data-zooming-height="1080" />
</a></p>

<p>Similarly, camelot output is on the left hand side whereas AWS textract output
is the middle one.</p>

<p>In this test case, AWS produced better result again:</p>
<ul>
  <li>(1) Long line item are grouped as one cell (look at last row of the first table.);</li>
  <li>(2) Captured the second table at the bottom of the page. However, one noticable mistake from AWS
is that the <code class="highlighter-rouge">Note</code> column in the second table is merged into the left-hand-side
row-header column.</li>
</ul>

<hr />

<h6 id="image-below-is-the-screenshot-of-aws-textract-ui">Image below is the screenshot of AWS textract UI.</h6>

<p><a href="/assets/documentation/aws-textract-ui-d154edfe5f1ab142e93e53831e33da3132994c4d8affc1fb972461917fb6efac.png">
  <img src="/assets/documentation/aws-textract-ui-d154edfe5f1ab142e93e53831e33da3132994c4d8affc1fb972461917fb6efac.png" alt="AWS textract UI" class="zooming" data-rjs="/assets/documentation/aws-textract-ui-d154edfe5f1ab142e93e53831e33da3132994c4d8affc1fb972461917fb6efac.png" data-zooming-width="2508" data-zooming-height="1008" />
</a></p>

<hr />

<h6 id="sample-camelot-code">Sample Camelot code</h6>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># installation 
</span><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="s">"camelot-py[base]"</span>

<span class="c1"># fix: PyPDF2.errors.DeprecationError
# source: https://github.com/camelot-dev/camelot/issues/339
</span><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="s">'PyPDF2&lt;3.0'</span>

<span class="c1"># fix: RuntimeError: Please make sure that Ghostscript is installed
# source: https://github.com/atlanhq/camelot/issues/184
</span><span class="err">!</span><span class="n">apt</span> <span class="n">install</span> <span class="n">ghostscript</span> <span class="n">python3</span><span class="o">-</span><span class="n">tk</span>
<span class="kn">from</span> <span class="nn">ctypes.util</span> <span class="kn">import</span> <span class="n">find_library</span>
<span class="n">find_library</span><span class="p">(</span><span class="s">"gs"</span><span class="p">)</span>

<span class="c1"># fix: DependencyError: PyCryptodome is required for AES algorithm
</span><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">pycryptodome</span><span class="o">==</span><span class="mf">3.15</span><span class="p">.</span><span class="mi">0</span>

<span class="kn">import</span> <span class="nn">camelot</span>

<span class="c1"># Test-1: single-table
</span><span class="n">table</span> <span class="o">=</span> <span class="n">camelot</span><span class="p">.</span><span class="n">read_pdf</span><span class="p">(</span>
    <span class="s">"/content/SG220527OTHRMX7S-travelite_holdings_ltd.pdf"</span><span class="p">,</span> 
    <span class="n">pages</span><span class="o">=</span><span class="s">'1'</span><span class="p">,</span> 
    <span class="n">flavor</span><span class="o">=</span><span class="s">'stream'</span>
<span class="p">)</span>
<span class="c1"># save as csv file
</span><span class="n">table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">to_csv</span><span class="p">(</span><span class="s">"single.csv"</span><span class="p">)</span>


<span class="c1"># Test-2: multi-tables
</span><span class="n">table</span> <span class="o">=</span> <span class="n">camelot</span><span class="p">.</span><span class="n">read_pdf</span><span class="p">(</span>
    <span class="s">"/content/SG220805OTHR7ZPG_Sembcorp Industries Ltd_20220805072353_00_FS_2Q_20220630.pdf"</span><span class="p">,</span>
    <span class="n">pages</span><span class="o">=</span><span class="s">'6'</span><span class="p">,</span>
    <span class="n">flavor</span><span class="o">=</span><span class="s">'stream'</span>
<span class="p">)</span>
<span class="c1"># save as csv file
</span><span class="n">table</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">to_csv</span><span class="p">(</span><span class="s">"multi.csv"</span><span class="p">)</span></code></pre></figure>

<p>Related:</p>
<ul>
  <li><a href="https://news.ycombinator.com/item?id=20470439">Discussion on HN</a></li>
  <li><a href="https://maxhalford.github.io/blog/ocr-spelling-correction-is-hard/">OCR spelling correction is hard</a></li>
</ul>

          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=Table+Extraction:+Comparing+Amazon+Textract+Service+and+Camelot%20-%20https://lxyuan0420.github.io/posts/aws-textract-camelot-comparison%20by%20@lxyuan" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"/></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://lxyuan0420.github.io/posts/aws-textract-camelot-comparison" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewBox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"/></svg>
            </a>
          </div>

          
        </article>
        <footer class="footer scrollappear">
  <p>
    Made with <a href="https://github.com/nielsenramon/chalk" rel="noreferrer noopener" target="_blank" title="Download Chalk">Chalk</a>.
  </p>
</footer>

      </div>
    </div>
  </main>
  

<script src="/assets/vendor-3ee2c63bbac916f96cd7f90e83ab767f058ead1301444c9966f5156911c8be7f.js" type="text/javascript"></script>


  <script src="/assets/webfonts-96493456d319d1bf419afdf8701552d4d486fee6afd304897d4fd81eb4e0cc0b.js" type="text/javascript"></script>



  <script src="/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js" type="text/javascript"></script>


<script src="/assets/application-cfde13ac81ddaf4351b2e739603e2baf688d0fcc9aba613fe62bbb1c7b037fb9.js" type="text/javascript"></script>


</body>
</html>
